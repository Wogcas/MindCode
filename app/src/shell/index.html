<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MindCode - Plataforma de Aprendizaje</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="../../assets/styles.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: { DEFAULT: '#64A85F', 50: '#E8F5E6', 100: '#D1EBC9', 200: '#A3D894', 300: '#8BCE7F', 400: '#73C169', 500: '#64A85F', 600: '#508A4C', 700: '#3C6739', 800: '#284426', 900: '#142213' },
                    },
                    fontFamily: { Colmeak: ['Colmeak', 'sans-serif'], sans: ['Quicksand', 'system-ui', 'sans-serif'] }
                }
            }
        }
    </script>
</head>

<body id="app-root" class="font-sans bg-gray-50">
    
    <app-header></app-header>

    <main id="vista" class="pt-6 min-h-screen"></main>

    <script type="module" src="../componentes/header.js"></script>
    <script type="module" src="../componentes/Pagina404.js"></script>
    
    <script type="module" src="../dashboard/dashboardAlumno.js"></script>
    <script type="module" src="../dashboard/DashboardMaestro.js"></script>
    
    <script type="module" src="../mis-cursos/MisCursosMaestro.js"></script>
    <script type="module" src="../mis-cursos/MisCursosAlumno.js"></script>

    <script type="module" src="../ver-curso/VisorLeccion.js"></script>
    <script type="module" src="../utils/router.js"></script>


    <script type="module">
        // Este script solo corre una vez al cargar la página
        
        const usuario = JSON.parse(localStorage.getItem("usuario") || 'null');
        
        // A. Protección: Si no hay usuario, mandar al login
        if (!usuario && !window.location.href.includes('login')) {
             window.location.href = "../login/index.html";
        }

        // B. Redirección Inicial (Si la URL está vacía)
        // Si no hay hash (ej: index.html a secas), decidimos a dónde ir
        if (!window.location.hash || window.location.hash === '#/') {
            
            if (usuario.tipo === "Maestro") {
                // Cambiamos el hash, el Router detectará esto y cargará el componente
                window.location.hash = "/dashboard-maestro";
            } else {
                window.location.hash = "/dashboard-alumno";
            }
        }
        
        // Si ya hay un hash (ej: #/leccion/...), el Router lo manejará solo.
    </script>

</body>
</html>